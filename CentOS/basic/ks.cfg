#platform=x86, AMD64, or Intel EM64T
#version=DEVEL
# Install OS instead of upgrade
install
# Keyboard layouts
# old format: keyboard us
# new format:
keyboard --vckeymap=us --xlayouts='us'
# Reboot after installation
reboot --eject
# System timezone
timezone Asia/Shanghai
# System language
lang en_US.UTF-8
# Firewall configuration
firewall --enabled --ssh
# Network information
network  --bootproto=dhcp --device=eth0
network  --hostname=localhost.localdomain
# System authorization information
auth  --useshadow  --passalgo=sha512
# Use CDROM installation media
cdrom
# Use text mode install
text
# Run the Setup Agent on first boot
firstboot --enable
# SELinux configuration
selinux --disabled
# Do not configure the X Window System
skipx

# System services
services --enabled="chronyd"
ignoredisk --only-use=vda
# System bootloader configuration
bootloader --append="crashkernel=auto" --location=mbr --boot-drive=vda
autopart --type=lvm
# Partition clearing information
clearpart --none --initlabel

# Pre-installation script
%pre
%end

# Post-installation script
%post
#!/bin/bash

if [ ! -d /root/.ssh ]
then
    mkdir /root/.ssh
if

cat > /root/.ssh/authorized_keys << EOF
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC3zzeL3QttE38TI9uhcQ+fUOw5xrx6cn4CmWZ4MnESVCUOWejoQd2gb09N6j8JisOkexjYyanoaOV9vUpeSYgRNj1YMyPnIL2I0er8y4hPAPhYqimAJPPFOo0cdV379kARqZKwj760ADvOr68VcUcf4OdojGjhPcLOz2RK4GSCWHuxFW+/L3wOWThUQKafvt0I4KXpyLlvhT499HD/HzqmNCZXMRW5TDJqhqDzEvH6ZqWJ8JL2dx0g45P8C4Ngq6QLs0rlsgIMOt15iIHUvY5HO+P0JsA/nWUJIQCbvgXsz4CbnUTDqSa8Uf7gTdpFZUixzGu52jB04BOUB4zzLL7h276p2kgurHrPSe4NAdHyDtnBSxb/40EnmEZP1yi93ZhMdNawPG596yKfjwCtlpvXP7j6hnvtm1+rxYUnsaXaafK6VCOfulX6FuqtdWTnGVlp3H3P3EkImyy9Xa1Xip1T+Fo1QH1w9ESdDqirfW6V29lkv2MtJ0oB6Kd0+JIUYvQFx5EpPdQNRPFK8j/CycaRehP/XAPAFMDppctuSd8GVtUb2kfawvGzfPVI9V3jZmZDSzqW8jJMmbsbLq9Nu5Mmu3LBao2Y2gpyyS7yKwdZaQ6K1hCFzjvsp8K9ghrDEMh36PzG1dq/6m6O/9mbBqZaTd5jqVU6H0SCX+RiUmriAQ== tairan@tairan.net
EOF

%end

%packages
@core
nano
wget
net-tools
vim-enhanced
emacs-nox
git

%end
